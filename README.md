#### Тестовое задание
Написать функцию формирования sql-запросов (MySQL) из шаблона и значений параметров.

Места вставки значений в шаблон помечаются вопросительным знаком, после которого может следовать спецификатор преобразования.
Спецификаторы:
?d - конвертация в целое число
?f - конвертация в число с плавающей точкой
?a - массив значений
?# - идентификатор или массив идентификаторов

Если спецификатор не указан, то используется тип переданного значения, но допускаются только типы string, int, float, bool (приводится к 0 или 1) и null.
Параметры ?, ?d, ?f могут принимать значения null (в этом случае в шаблон вставляется NULL).
Строки и идентификаторы автоматически экранируются.

Массив (параметр ?a) преобразуется либо в список значений через запятую (список), либо в пары идентификатор и значение через запятую (ассоциативный массив).
Каждое значение из массива форматируется в зависимости от его типа (идентично универсальному параметру без спецификатора).

Также необходимо реализовать условные блоки, помечаемые фигурными скобками.
Если внутри условного блока есть хотя бы один параметр со специальным значением, то блок не попадает в сформированный запрос.
Специальное значение должно возвращаться методом skip. Нужно выбрать подходящее значение на своё усмотрение.
Условные блоки не могут быть вложенными.

При ошибках в шаблонах или значениях выбрасывать исключения.

Для упрощения задачи предполагается, что в передаваемом шаблоне не будут использоваться комментарии sql.

В файле Database.php находится заготовка класса с заглушками в виде исключений. Нужно реализовать методы buildQuery и skip.
В файле DatabaseTest.php находятся примеры (тесты). Тесты обязательно должны быть успешными (в противном случае код рассматриваться не будет).

Код должен работать с php 8.3.

#### Решение

Версия PHP: не ниже 8.1 (из-за использования полезной функции array_is_list()).
Решение писалось под версию 8.3.20 на VS Code в окружении Docker, Alpine Linux.
Из-за исходного ограничения скрипт потянет за собой зависимости от MySQL.

Запуск тестов:
- Установить Docker и Docker Compose.
- Выполнить docker-compose up.
- Выполнить docker-compose run --rm web -c php "/app/sources/test.php"
  - Ожидаемый результат: надпись "ОК" (без перевода строки).
- Но если в системе уже есть окружение с настроенной базой данных MySQL и подходящей версией PHP,
  то можно сразу запустить тесты из папки с проектом: php ./sources/test.php
  (хотя возможно, понадобится изменить настройки подключения к БД в вышеупомянутом файле)

Соблюдение стандартов кода:
- Код писался в VS Code с расширением PHP v1.49.15728 с соответствующим линтером и преттификатором.
- Код проверялся дополнительно линтером PHP_CodeSniffer version 3.8.0 (phpcs).
- Это позволяло отследить наиболее явные противоречия стандарту PSR 12.
- Поскольку исходный код подсвечивался линтерами с ошибками,
  я не стал много времени уделять разрешению противоречий в разных стандартах кода
  и просто расставил табы, пробелы и комменты там, где линтеры не противоречили друг другу.

Модификации исходного архива тестового задания:
- Database.php, собственно предложенный к расширению.
- Вспомогательные классы в папках Exceptions и Values.
- Дополнения тестов в файле test.php:
    - Добавлена проверка экранирования одинарных кавычек.
    - Добавлена проверка спецификатора ?f (Float/Double).
    - Хост в настройке подключения к базе данных заменён на mysql_db 
        (ради совместимости с окружением внутри докер-контейнеров).
- Данный файл.